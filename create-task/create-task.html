<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create New Task</title>
    <link rel="stylesheet" href="create-task.css" />
  </head>
  <body>
    <!-- Include the header component -->
    <app-header></app-header>

    <main class="task-form">
      <form id="new-task-form">
        <div>
          <label for="taskTitle">Title <span>*</span></label>
          <input type="text" id="taskTitle" name="title" required minlength="3" maxlength="255" />
        </div>
        <div>
          <label for="taskDescription">Description</label>
          <textarea id="taskDescription" name="description" rows="4" maxlength="255"></textarea>
        </div>
        <div>
          <label for="taskPriority">Priority <span>*</span></label>
          <select id="taskPriority" name="priority" required>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <div>
          <label for="taskStatus">Status <span>*</span></label>
          <select id="taskStatus" name="status" required>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <div>
          <label for="taskDepartment">Department <span>*</span></label>
          <select id="taskDepartment" name="department" required>
            <!-- Options will be populated dynamically -->
          </select>
        </div>
        <div>
          <label for="customEmployeeSelect">Responsible Employee <span>*</span></label>
          <!-- Hidden input to store selected employee id -->
          <input type="hidden" id="employeeInput" name="employee" required />
          <!-- Custom select container -->
          <div id="customEmployeeSelect" class="custom-select collapsed">
            <div class="selected-value">
              <span class="placeholder">აირჩიე თანამშრომელი</span>
            </div>
            <div class="arrow">
              <!-- Use an icon or Unicode arrow -->
              <span class="arrow-icon">&#9662;</span>
            </div>
          </div>
          <!-- Dropdown container (initially hidden) -->
          <div id="employeeDropdown" class="custom-select-dropdown" hidden>
            <!-- First option: add new employee -->
            <div class="dropdown-option add-new">+ დაამატე ახალი თანამშრომელი</div>
            <!-- Dynamic list of employee options will be injected here -->
            <div class="options-container"></div>
          </div>
        </div>
        <div>
          <label for="taskDueDate">Due Date <span>*</span></label>
          <input type="date" id="taskDueDate" name="dueDate" required />
        </div>
        <button type="submit">Create Task</button>
      </form>
    </main>

    <!-- Include our custom components -->
    <script src="../components/headerComponent.js" type="module"></script>
    <script src="../components/employeeModal.js" type="module"></script>
    <!-- Include the necessary scripts -->
    <script src="../scripts/create-task.js" type="module"></script>
    <!-- Place the employee modal in the page -->
    <employee-modal></employee-modal>
  </body>
</html>
